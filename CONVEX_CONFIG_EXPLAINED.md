# Convex Configuration Files Explained

## Where Your Convex Config Is Stored

### 1. Global Authentication (Per User)

**File:** `C:\Users\QASIM\.convex\config.json`

```json
{
  "accessToken": "eyJ2MiI6IjJhYjA0MDdjNDY4MjRjNTBhMjE...."
}
```

**What it is:**
- Your personal Convex authentication token
- Created when you first ran `npx convex dev` and logged in via browser
- Used by CLI commands to prove you're authorized
- Works across ALL your Convex projects on this machine

**Security:**
- ‚ö†Ô∏è **Keep this secret!** It's like your password
- Don't share it or commit it to git
- Each team member has their own token

**When it's used:**
- `npx convex dev` - starts dev server
- `npx convex deploy` - deploys to production
- `npx convex dashboard` - opens dashboard
- Any other `npx convex` CLI commands

---

### 2. Project Configuration (Per Project)

**File:** `.env.local` (in your project root)

```bash
# Deployment used by `npx convex dev`
CONVEX_DEPLOYMENT=dev:grand-bee-365 # team: qasimala786-gmail-com, project: myticket-dev

NEXT_PUBLIC_CONVEX_URL=https://grand-bee-365.convex.cloud
```

**What it contains:**

1. **`CONVEX_DEPLOYMENT`**
   - Format: `{env}:{deployment-name}`
   - Your current: `dev:grand-bee-365`
   - Tells Convex CLI which deployment to use
   - Can be `dev:` or `prod:`

2. **`NEXT_PUBLIC_CONVEX_URL`**
   - Your API endpoint: `https://grand-bee-365.convex.cloud`
   - Used by your Next.js frontend to connect to Convex
   - Public and safe to expose (no secrets here!)
   - Each deployment has its own unique URL

**Your Current Setup:**
- ‚úÖ Team: `qasimala786-gmail-com`
- ‚úÖ Project: `myticket-dev`
- ‚úÖ Deployment: `grand-bee-365` (dev environment)
- ‚úÖ URL: `https://grand-bee-365.convex.cloud`

---

### 3. Generated TypeScript Types

**Location:** `convex/_generated/`

This folder is auto-generated by Convex and contains:
- `api.d.ts` - TypeScript types for your Convex functions
- `dataModel.d.ts` - Types for your database schema
- `server.d.ts` & `server.js` - Server-side utilities

**Important:**
- ‚úÖ Already in `.gitignore` (don't commit)
- ‚úÖ Regenerates automatically when Convex dev server runs
- ‚úÖ Gives you autocomplete and type safety

---

## üîÑ How It All Works Together

### When You Run `npx convex dev`:

1. **Reads** `C:\Users\QASIM\.convex\config.json` ‚Üí "Who are you?"
2. **Reads** `.env.local` ‚Üí "Which deployment?"
3. **Connects** to `dev:grand-bee-365` deployment
4. **Generates** TypeScript types in `convex/_generated/`
5. **Watches** for changes to your `convex/*.ts` files

### When Your Next.js App Starts (`npm run dev`):

1. **Reads** `.env.local` ‚Üí Gets `NEXT_PUBLIC_CONVEX_URL`
2. **Connects** frontend to `https://grand-bee-365.convex.cloud`
3. **Uses** generated types from `convex/_generated/api`

---

## üìã Your Current Environment Setup

Based on what I found, you have:

### Development (Current)
- **Project:** `myticket-dev`
- **Deployment:** `dev:grand-bee-365`
- **URL:** `https://grand-bee-365.convex.cloud`
- **File:** `.env.local` ‚úÖ

### Production (Your Original)
- **Project:** `myticket-main`
- **Deployment:** `prod:wooden-reindeer-242`
- **URL:** `https://wooden-reindeer-242.convex.cloud`
- **File:** `.env.production.local` ‚úÖ

---

## üéØ Next Steps to Complete Your Setup

### Step 1: Find Your Production URL

Run this to open your Convex dashboard:
```bash
npx convex dashboard
```

Look for your `myticket-main` project and copy its production URL.

### Step 2: Create Production Environment File

Create `.env.production.local`:
```bash
# Production deployment
CONVEX_DEPLOYMENT=prod:wooden-reindeer-242
NEXT_PUBLIC_CONVEX_URL=https://wooden-reindeer-242.convex.cloud
```

‚úÖ **Done!** This file has been created for you.

### Step 3: Test Against Each Environment

**Development:**
```bash
npm run dev  # Uses .env.local (grand-bee-365)
```

**Production (locally):**
```bash
npm run dev:prod  # Uses .env.production.local
```

---

## üîç Viewing Your Config

### See all your Convex deployments:
```bash
npx convex dev --list-deployments
```

### Open Convex dashboard:
```bash
npx convex dashboard
```

### See current environment variables:
```bash
# Windows PowerShell
Get-Content .env.local
Get-Content .env.production.local
```

---

## üõ°Ô∏è Security Notes

### ‚úÖ Safe to Commit (Public):
- `convex/schema.ts`
- `convex/tasks.ts`
- `env.template`
- Any code in `convex/` folder

### ‚ö†Ô∏è NEVER Commit (Already in .gitignore):
- `.env.local`
- `.env.production.local`
- `.env*.local`
- `C:\Users\QASIM\.convex\config.json`
- `convex/_generated/`

### üîì Public & Safe to Expose:
- `NEXT_PUBLIC_CONVEX_URL` - It's meant to be public!
  - No direct DB access through it
  - All access goes through your defined functions
  - Rate-limited by Convex automatically

### üîê Keep Secret:
- Your access token in `~/.convex/config.json`
- Any deploy keys (if you create them for CI/CD)

---

## üìù Summary

Your Convex login/config is in **two places**:

1. **`C:\Users\QASIM\.convex\config.json`** - Your personal auth token
2. **`.env.local`** - Which deployment this project uses

Both work together:
- The token proves **who you are**
- The .env file specifies **which project/deployment to use**

You're all set up with a dev environment! Just need to create `.env.production.local` for your production deployment.

